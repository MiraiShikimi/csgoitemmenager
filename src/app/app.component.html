
<app-header></app-header>



<body class="mainBody">


<div  class="container-xl" id="mainContainer">
    
<div  *ngIf="myRoles.admin">
    <div >
    <div class="my-class">
        <button type="button" (click)="onOpenModal(null, 'add')" id="addItemButton" class="btn btn-primary">add Item</button>
        <button type="button" (click)="onRefreshPrices()" id="refreshItemPrices" class="btn btn-primary" style="margin-left: 10px;">refresh item prices</button>
    </div >
<div class="card-group">
  <div *ngFor="let csgoItem of csgoItems" class="flex-wrap">
    <img src="https://steamcommunity-a.akamaihd.net/economy/image/{{csgoItem?.imageURL}}" class="card-img-top" alt="..." style="width: 200px;height:128px;">
    <div class="card-body">
      <h5 class="card-title">{{csgoItem?.displayName}}</h5>
      <p class="card-text">{{csgoItem?.lowestPrice}}</p>
      <button type="button" (click)="onOpenModal(csgoItem, 'update')" id="updateItemButton" class="btn btn-primary">edit Item</button>
      <button type="button" (click)="onOpenModal(csgoItem, 'addUserItem')" id="addUserItemButton" class="btn btn-primary" style="margin-left: 10px;">Add Item to user</button>
    </div>
  </div>
</div >
</div>
</div>
</div>
<button type="button" (click)="onOpenModal(null, 'addUserItem2')" id="addUserItemButton2" class="btn btn-primary">add user Item 2</button>

<app-user-inventory-values *ngIf="myRoles.user"></app-user-inventory-values>

<app-user-items *ngIf="myRoles.user">

</app-user-items>

</body>


<!-- add Item modal-->
<div id="addItemModal" class="modal fade">
  <div class="modal-dialog">
      <div class="modal-content">
          <form #addForm="ngForm" (ngSubmit)="onAddItem(addForm)">
              <div class="modal-header">
                  <h4 class="modal-title">Add Item</h4>
                  <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
              </div>
              <div class="modal-body">
                  <div class="form-group">
                      <label>HASH NAME</label>
                      <input type="text" ngModel name="hashName" class="form-control" required>
                  </div>
                  <div class="form-group">
                      <label>IMAGE URL</label>
                      <input type="text" ngModel name="imageURL" class="form-control" required>
                  </div>
              </div>
              <div class="modal-footer">
                  <button type="button" class="btn btn-warning" id="closeModal" data-dismiss="modal">
                      Cancel
                  </button>
                  <button type="submit" [disabled]="addForm.invalid" class="btn btn-success">
                      <span >Add</span>
                  </button>
              </div>
          </form>
      </div>
  </div>
</div>


<!-- eddit Item modal-->
<div id="updateItemModal" class="modal fade">
    <div class="modal-dialog">
        <div class="modal-content">
            <form #updateForm="ngForm" >
                <div class="modal-header">
                    <h4 class="modal-title">Add Item</h4>
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                </div>
                <div class="modal-body">
                    <div class="form-group">
                        <label>IMAGE URL</label>
                        <input type="text" ngModel = "{{updatingCSGOItem?.imageURL}}" name="imageURL" class="form-control" required>
                    </div>
                    <input type="hidden" ngModel = "{{updatingCSGOItem?.id}}" name="id" id="id" class="form-contorl">
                    <input type="hidden" ngModel = "{{updatingCSGOItem?.hashName}}" name="hashName" id="hashName" class="form-contorl">
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-warning" id="closeupdateModal" data-dismiss="modal">
                        Cancel
                    </button>
                    <button type="submit" (click)="onUpdateItem(updateForm.value,updateForm)" class="btn btn-success">
                        <span >update</span>
                    </button>
                </div>
            </form>
        </div>
    </div>
  </div>

  <!-- add as user Item -->
<div id="addUserItemModal" class="modal fade">
    <div class="modal-dialog">
        <div class="modal-content">
            <form #addUserItemForm="ngForm" >
                <div class="modal-header">
                    <h4 class="modal-title">Add Item</h4>
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                </div>
                <div class="modal-body">
                    <div class="form-group">
                        <label>Quantity</label>
                        <input type="number" ngModel name="quantity" class="form-control" required>
                        <input type="hidden" ngModel = "{{updatingCSGOItem}}" name="csgoItem" id="csgoItem" class="form-contorl">
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-warning" id="closeUserItemAddModal" data-dismiss="modal">
                        Cancel
                    </button>
                    <button type="submit" (click)="onAddUserItem(addUserItemForm.value,addUserItemForm)" class="btn btn-success">
                        <span >update</span>
                    </button>
                </div>
            </form>
        </div>
    </div>
  </div>

<!-- Add item to user modal -->
<div id="addUserItemModal2" class="modal fade bd-example-modal-xl" tabindex="-1" role="dialog" aria-labelledby="myExtraLargeModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-xl">
      <div class="modal-content">
        <div class="modal-header">
            <h4 class="modal-title">Add Item</h4>
            <button type="button" class="close" id="userItemSelectClose" data-dismiss="modal" aria-hidden="true">&times;</button>
        </div>
        <div class="card-group">
            <div *ngFor="let csgoItem of csgoItems" class="flex-wrap">
              <img src="https://steamcommunity-a.akamaihd.net/economy/image/{{csgoItem?.imageURL}}" class="card-img-top" alt="..." style="width: 200px;height:128px;">
              <div class="card-body">
                <h5 class="card-title">{{csgoItem?.displayName}}</h5>
                <button type="button" (click)="onOpenModal(csgoItem, 'addUserItem')" id="addUserItemButton" class="btn btn-primary">Add Item to user</button>
              </div>
            </div>
        </div>
      </div>
    </div>
  </div>
  <router-outlet></router-outlet>